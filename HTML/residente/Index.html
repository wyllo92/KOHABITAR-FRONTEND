<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú Principal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="CSS/Index.css">
</head>

<body class="min-vh-100 d-flex flex-column">
    <header class="w-100 d-flex justify-content-between align-items-top px-4 py-2 border-bottom shadow-sm">
        <div class="d-flex align-items-center">
            <a href="index.html" onclick="cargarVista('dashboard.html')"
                style="display: inline-flex; align-items: top; text-decoration: none;">
                <img src="IMG/logo-kohabitar2.jpg" alt="Logo" height="80" class="me-2 rounded-1">
                <h5 class="titulo-nombre-empresa">KOHABITAR</h5>
            </a>
        </div>

        <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="userDropdown"
                data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa-solid fa-user"></i> Mi Cuenta
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                <li>
                    <a class="dropdown-item" href="#" onclick="cargarVista('perfil.html')">
                        <i class="fa-solid fa-user-pen me-2"></i>Editar Perfil
                    </a>
                </li>
                <li>
                    <a class="dropdown-item" href="logout.html" onclick="cerrarSesionYRedirigir()">
                        <i class="fa-solid fa-right-from-bracket me-2"></i>Cerrar Sesión
                    </a>
                </li>
            </ul>

        </div>
    </header>

    <div class="d-flex">
        <div class="sidebar">
            <div class="accordion" id="menuAccordion">

                <!-- Zonas Comunes -->

                <div class="accordion-item bg-transparent border-0">
                    <a class="d-flex justify-content-between align-items-center" data-bs-toggle="collapse"
                        href="#zonasComunesCollapse" role="button" aria-expanded="false">
                        <span><i class="fas fa-shield-alt"></i> Zonas Comunes</span>
                        <i class="fas fa-chevron-right rotate-icon"></i>
                    </a>
                    <div id="zonasComunesCollapse" class="accordion-collapse collapse submenu ps-3"
                        data-bs-parent="#menuAccordion">
                        <a href="#" onclick="cargarVista('ZONASCOMUNES/ZonasComunes.html')">Registro de Visitantes</a>
                        <a href="#" onclick="cargarVista('ZONASCOMUNES/ZonasComunes2.html')">Registro de Visitantes</a>
                    </div>
                </div>

                <!-- Pagos -->
                <div class="accordion-item bg-transparent border-0">
                    <a class="d-flex justify-content-between align-items-center" data-bs-toggle="collapse"
                        href="#pagosCollapse" role="button" aria-expanded="false"
                        onclick="cargarVista('PAGOS/GestionPagos.html')">
                        <span><i class="fas fa-money-bill"></i> Pagos</span>
                        <i class="fas fa-chevron-right rotate-icon"></i>
                    </a>
                    <div id="pagosCollapse" class="accordion-collapse collapse submenu ps-3"
                        data-bs-parent="#menuAccordion">
                        <a href="#" onclick="cargarVista('PAGOS/Tarifas.html')">Tarifas</a>
                        <a href="#" onclick="cargarVista('PAGOS/GenerarFactura.html')">Generar Factura</a>
                        <a href="#" onclick="cargarVista('PAGOS/GestionPagos.html')">Gestion pagos</a>
                        <a href="#" onclick="cargarVista('PAGOS/HistorialPagos.html')">Historial de Pagos</a>
                    </div>
                </div>

                <!-- Reportes -->
                <div class="accordion-item bg-transparent border-0">
                    <!-- Notificaciones -->
                    <div class="accordion-item bg-transparent border-0">
                        <a class="d-flex justify-content-between align-items-center" data-bs-toggle="collapse"
                            href="#notificacionesCollapse" role="button" aria-expanded="false">
                            <span><i class="fa-solid fa-bell"></i> Notificaciones</span>
                            <i class="fas fa-chevron-right rotate-icon"></i>
                        </a>
                        <div id="notificacionesCollapse" class="accordion-collapse collapse submenu ps-3"
                            data-bs-parent="#menuAccordion">
                            <a href="#" onclick="cargarVista('NOTIFICACIONES/mainNotificaciones.html')">Añadir
                                notificación</a>
                            <a href="#"
                                onclick="cargarVista('NOTIFICACIONES/ejemNotificaciones.html')">Notificaciones</a>
                        </div>
                    </div>
                    <!-- PQRs -->
                    <div class="accordion-item bg-transparent border-0">
                        <a class="d-flex justify-content-between align-items-center" data-bs-toggle="collapse"
                            href="#pqrCollapse" role="button" onclick="cargarVista('PQR/pqr.html')">
                            <span><i class="fa-regular fa-rectangle-list"></i> PQR</span>
                            <i class="fas fa-chevron-right rotate-icon"></i>
                        </a>

                        <div id="pqrCollapse" class="accordion-collapse collapse submenu ps-3"
                            data-bs-parent="#menuAccordion">
                            <a href="#" onclick="cargarVista('PQR/Pqr.html')">PQRs</a>
                        </div>
                        <div id="pqrCollapse" class="accordion-collapse collapse submenu ps-3"
                            data-bs-parent="#menuAccordion">
                            <a href="#" onclick="cargarVista('PQR/ConfigurarPqr.html')">Configurar PQR</a>
                        </div>
                    </div>
                    <!-- Contenedor donde se cargarán las vistas -->
                    <div id="contenidoVista"></div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- Contenido dinámico -->
            <div class="content">
                <iframe id="vistaFrame" src="dashboard.html"></iframe>
            </div>
            <footer class="text-black text-center py-3 bg-white mt-auto shadow-sm">
                <p class="mb-0">&copy; 2025 Sistema de Gestión de Propiedad Horizontal. Todos los derechos reservados.
                </p>
                <small>Desarrollado por Kohabitar cloud</small>
            </footer>
        </div>
    </div>

    <script>
        const toggles = document.querySelectorAll('[data-bs-toggle="collapse"]');
        toggles.forEach(toggle => {
            toggle.addEventListener('click', function () {
                const icon = this.querySelector('.rotate-icon');
                // Cierra todos
                document.querySelectorAll('.rotate-icon').forEach(i => i.classList.remove('open'));
                // Si el target no está abierto, lo abrimos
                const target = document.querySelector(this.getAttribute('href'));
                if (!target.classList.contains('show')) {
                    icon.classList.add('open');
                }
            });
        });

        function cargarVista(vista) {
            document.getElementById("vistaFrame").src = vista;
        }
    </script>
</body>

</html>